# 作用域是什么

## 编译原理

虽然javascript归类为“动态”或“解释执行”语言，但是事实上他是一门编译语言。但是与传统的编译语言不同，他不是提前编译的、编译结果也不能在分布式系统中进行移植

在传统编译语言中，程序中的一段源码代码在执行之前会经历三个步骤，统称为“编译”。

- 分词/词法分析（Tokenizing/Lexing）  
  这个过程会将由字符串组成的字符串分解成（对编程语言来说）有意义的代码块，这些代码块被称为词法单元（token）。
- 解析/语法分析（parsing）  
  这个过程是将词法单元流（数组）转成一个由元素逐级嵌套所组成的代表了程序语法结构的树。这个数被称为“抽象语法树”（abstract syntax tree， AST）。
- 代码生成  
  将AST转换为可执行代码的过程被称为代码生成。这个过程与语言、平台等相关。

比起那些编译过程只有三个步骤的语言的编辑器，javascript引擎要复杂得多，例如，在语法分析和代码生成阶段有特定的步骤来对运行性能进行优化。但简单的说，任何javascript代码片段在执行前都要进行编译（**通常就在执行前**）。

## 理解作用域

在解释作用域之前，我们先定义三个角色，以便后面理解

- 引擎  
  从头到尾负责整个javascript程序的编译以及执行过程
- 编译器  
  引擎的好朋友之一，负责语法分析以及代码生成等事情
- 作用域  
  引擎的另一个好朋友，负责收集并维护由所有声明的标识符（变量）组成的一系列查询，并实施一套非常严格的规定，确定当前执行的代码对这些标识符的访问权限。

定义好角色后，我们来分解一下`var a = 2;`，看看三个角色是如何协同工作的。

编译器首先会
